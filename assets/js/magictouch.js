var tuio={cursors:[],_data:{},_touchstart:function(touch){this._create_event('touchstart',touch,{});},_touchmove:function(touch){this._create_event('touchmove',touch,{});},_touchend:function(touch){this._create_event('touchend',touch,{});},_create_event:function(name,touch,attrs){var evt=document.createEvent('CustomEvent');evt.initEvent(name,true,true);evt.touches=this.cursors;evt.targetTouches=this._get_target_touches(touch.target);evt.changedTouches=[touch];for(var attr in attrs){if(attrs.hasOwnProperty(attr)){evt[attr]=attrs[attr];}}
if(touch.target){touch.target.dispatchEvent(evt);}else{document.dispatchEvent(evt);}},_get_target_touches:function(element){var targetTouches=[];for(var i=0;i<this.cursors.length;i++){var touch=this.cursors[i];if(touch.target==element){targetTouches.push(touch);}}
return targetTouches;},callback:function(type,sid,fid,x,y,angle){var data;if(type!==3){data=this._data[sid];}else{data={sid:sid,fid:fid};this._data[sid]=data;}
data.identifier=sid;data.pageX=window.innerWidth*x;data.pageY=window.innerHeight*y;data.target=document.elementFromPoint(data.pageX,data.pageY);switch(type){case 3:this.cursors.push(data);this._touchstart(data);break;case 4:this._touchmove(data);break;case 5:this.cursors.splice(this.cursors.indexOf(data),1);this._touchend(data);break;default:break;}
if(type===5){delete this._data[sid];}}};function tuio_callback(type,sid,fid,x,y,angle){tuio.callback(type,sid,fid,x,y,angle);}